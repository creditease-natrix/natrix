webpackJsonp([5],{"8cKp":function(t,e){},RseT:function(t,e){},kaDX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"",components:{page:a("js5j").a},data:function(){return{href:ManageIndex,page_Count:1,pageNum:1,pageShow:!1,tableData:[],searchWord:"",statusTxt:"all",options:[{value:"all",label:"全部"},{value:"active",label:"激活"},{value:"maintain",label:"维护"},{value:"posting",label:"邮寄"}],currentPageNum:1}},created:function(){},watch:{},mounted:function(){this.getTerminalList(1)},methods:{pageChangeHandle:function(t){this.currentPageNum=t,this.getTerminalList(t)},getTerminalList:function(t){var e=this;this.$post({url:HP1+"/terminal/device/list/v1",data:{search:this.searchWord,status:this.statusTxt,identification:void 0!=this.$route.query.identification?this.$route.query.identification:null,is_paginate:!0,pagenum:void 0!=this.$route.query.pagenum?this.$route.query.pagenum:t}}).then(function(t){200==t.data.code&&(e.tableData=t.data.info,e.page_Count=t.data.page_count,e.pageNum=t.data.page_num,e.pageShow=e.page_Count>0,e.tableData.forEach(function(t,a){t.statusTxt=e.$t(t.status),t.terminalNum=t.terminal_alive+"/"+t.terminal_active+"/"+t.terminal_total}))})},getTerminalDetail:function(t){this.$router.push({path:"terminalDetail",query:{sn:t}})},gotoTerminalSite:function(t){this.$router.push({path:"terminalSite",query:{sn:t}})},handleEdit:function(t,e){this.$router.push({path:"editTerminal",query:{sn:e.sn}})},getMaintainOperation:function(t,e){var a=this;this.$put({url:HP1+"/terminal/device/operation/v1",data:{sn:e.sn,operation:"maintain"}}).then(function(t){200==t.data.code?a.getTerminalList(a.currentPageNum):a.$message({type:"error",message:t.data.message})})},getActiveOperation:function(t,e){var a=this;this.$put({url:HP1+"/terminal/device/operation/v1",data:{sn:e.sn,operation:"active"}}).then(function(t){200==t.data.code?a.getTerminalList(a.currentPageNum):a.$message({type:"error",message:t.data.message})})},getPostOperation:function(t,e){var a=this;this.$put({url:HP1+"/terminal/device/operation/v1",data:{sn:e.sn,operation:"posting"}}).then(function(t){200==t.data.code?a.getTerminalList(a.currentPageNum):a.$message({type:"error",message:t.data.message})})},getDelOperation:function(t,e){var a=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.delHandle(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},delHandle:function(t){var e=this;this.$put({url:HP1+"/terminal/device/operation/v1",data:{sn:t.sn,operation:"delete"}}).then(function(t){200==t.data.code?(e.$message({type:"success",message:"删除成功！"}),e.getTerminalList(e.currentPageNum)):e.$message({type:"error",message:t.data.message})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"nav"}},[a("span",{staticClass:"title"},[t._v("终端管理——终端设备列表")]),t._v(" "),a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("a",{staticClass:"home",attrs:{href:t.href}},[t._v(" 管理系统 "),a("i",{staticClass:"el-breadcrumb__separator el-icon-arrow-right"})]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:""}}},[t._v("终端管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/terminalList"}}},[t._v("终端设备列表")])],1)],1),t._v(" "),a("div",{staticClass:"optionBox clear"},[a("div",{staticStyle:{float:"right"}},[a("el-select",{staticStyle:{display:"inline-block"},attrs:{size:"mini",placeholder:"请选择"},on:{change:function(e){t.getTerminalList(1)}},model:{value:t.statusTxt,callback:function(e){t.statusTxt=e},expression:"statusTxt"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-input",{staticStyle:{diaplay:"inline-block",width:"300px"},attrs:{id:"searchBtn",placeholder:"根据mac、ip、客户端版本和组织名称搜索",size:"mini"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getTerminalList(1)}},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"mini"},on:{click:function(e){t.getTerminalList(1)}},slot:"append"})],1)],1)]),t._v(" "),t._m(0),t._v(" "),a("el-table",{staticStyle:{width:"100%,margin-top:50px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序列号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"nameLink",on:{click:function(a){t.getTerminalDetail(e.row.sn)}}},[t._v(t._s(e.row.sn))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",width:"200",label:"设备类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"client_version",width:"100",label:"客户端版本"}}),t._v(" "),a("el-table-column",{attrs:{width:"120",label:"登记组织"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.reg_orgs,function(e,n){return a("el-popover",{key:n,attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("名称: "+t._s(e.desc))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.name))])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"detect_orgs",width:"120",label:"检测组织"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.detect_orgs,function(e,n){return a("el-popover",{key:n,attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("名称: "+t._s(e.desc))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.name))])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"statusTxt",width:"80",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"terminalNum",width:"100",label:"终端信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"num cursor",class:{error:0==e.row.terminal_alive,success:e.row.terminal_alive==e.row.terminal_active},on:{click:function(a){t.gotoTerminalSite(e.row.sn)}}},[t._v("\n                "+t._s(e.row.terminalNum)+"\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"maintain"!=e.row.status,expression:"scope.row.status != 'maintain' "}],attrs:{size:"mini",type:"warning"},on:{click:function(a){t.getMaintainOperation(e.$index,e.row)}}},[t._v("维护")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"active"!=e.row.status,expression:"scope.row.status != 'active' "}],attrs:{size:"mini",type:"success"},on:{click:function(a){t.getActiveOperation(e.$index,e.row)}}},[t._v("激活")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.getDelOperation(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"posting"!=e.row.status,expression:"scope.row.status != 'posting' "}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.getPostOperation(e.$index,e.row)}}},[t._v("邮寄")])]}}])})],1),t._v(" "),a("page",{directives:[{name:"show",rawName:"v-show",value:t.pageShow,expression:"pageShow"}],attrs:{pageCount:t.page_Count},on:{"page-change":t.pageChangeHandle}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"statusTip"},[e("span",{staticClass:"listLabel"},[this._v("终端信息：")]),this._v(" "),e("span",{staticClass:"listOption"},[this._v("\n            [有效数量]/[激活数量]/[总和数量]\n            ")])])}]};var s=a("VU/8")(n,i,!1,function(t){a("RseT"),a("8cKp")},"data-v-3cb155ee",null);e.default=s.exports}});