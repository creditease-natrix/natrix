webpackJsonp([4],{Oa18:function(t,a){},djo4:function(t,a){},oltU:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"",components:{organizationSelect:s("FGtt").a},data:function(){return{href:ManageIndex,activeName:"first",checkList:["终端设备"],tableData:[],dialog:!1,value:"",options:[{value:"1",label:"1"}],primaryInfo:"",netInfo:"",netWork:"",address:"",summaryInfo:"",reg_orgs:[],device_alert:"",terminal_alert:""}},created:function(){},watch:{},mounted:function(){this.getPrimaryInfo()},methods:{handleClick:function(t,a){this.activeName=t.name},getPrimaryInfo:function(){var t=this;this.$get({url:HP1+"/terminal/device/basic/v1",data:{sn:this.$route.query.sn}}).then(function(a){200==a.data.code&&(t.primaryInfo=a.data.info,t.tableData=a.data.info.reg_orgs,t.checkList=[],t.primaryInfo.device_alert&&t.checkList.push("终端设备"),t.primaryInfo.terminal_alert&&t.checkList.push("终端"))})},showDialog:function(){this.dialog=!0},handleDel:function(t,a){this.tableData.splice(t,1)},organizationSelectHandle:function(t){var a=t[t.length-2];this.getOrganizationSummary(a)},getOrganizationSummary:function(t){var a=this;this.$get({url:HP1+"/terminal/organization/summary/v1",data:{id:t}}).then(function(t){200==t.data.code?(a.summaryInfo=t.data.info,a.address=t.data.info.addresses,a.networks=t.data.info.networks):a.$message({type:"error",message:t.data.message})})},confirmHandle:function(){var t=this;this.tableData.forEach(function(a,s){a.id==t.summaryInfo.id&&t.tableData.splice(s,1)}),this.tableData.push({name:this.summaryInfo.name,desc:this.summaryInfo.full_name,id:this.summaryInfo.id}),this.dialog=!1},cancelHandle:function(){this.dialog=!1},submitHandle:function(){var t=this;"-1"==this.checkList.indexOf("终端设备")?this.device_alert=!1:this.device_alert=!0,"-1"==this.checkList.indexOf("终端")?this.terminal_alert=!1:this.terminal_alert=!0,this.tableData.forEach(function(a,s){t.reg_orgs.push(a.id)}),this.$put({url:HP1+"/terminal/device/basic/v1",data:{sn:this.$route.query.sn,reg_orgs:this.reg_orgs,device_alert:this.device_alert,terminal_alert:this.terminal_alert}}).then(function(a){200==a.data.code?t.$router.push({path:"terminalList"}):t.$message({type:"error",message:a.data.message})})}}},e={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{attrs:{id:"nav"}},[s("span",{staticClass:"title"},[t._v("终端管理——修改终端设备")]),t._v(" "),s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("a",{staticClass:"home",attrs:{href:t.href}},[t._v("管理系统"),s("i",{staticClass:"el-breadcrumb__separator el-icon-arrow-right"})]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:""}}},[t._v("终端管理")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/terminalList"}}},[t._v("终端设备列表")])],1)],1),t._v(" "),s("div",{staticClass:"optionBox clear"},[s("ul",{staticClass:"primaryList"},[s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("端设备序列号：")]),s("span",{staticClass:"fl listOption"},[t._v(t._s(t.primaryInfo.sn))])]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("主机名称：")]),s("span",{staticClass:"fl listOption"},[t._v(t._s(t.primaryInfo.hostname))])]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("设备类型：")]),s("span",{staticClass:"fl listOption"},[t._v(t._s(t.primaryInfo.type))])]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("告警配置：")]),t._v(" "),s("span",{staticClass:"fl listOption"},[s("el-checkbox-group",{model:{value:t.checkList,callback:function(a){t.checkList=a},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"终端设备"}}),t._v(" "),s("el-checkbox",{attrs:{label:"终端"}})],1)],1)])]),t._v(" "),s("ul",{staticClass:"orgList"},[s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("检测组织：")]),t._v(" "),s("span",{staticClass:"fl listOption"},t._l(t.primaryInfo.detect_orgs,function(a,i){return s("strong",{key:i,staticClass:"org"},[t._v(t._s(a.name))])}))]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("登记组织：")]),t._v(" "),s("div",{staticClass:"fl listOption"},[s("el-table",{staticStyle:{width:"100%,margin-top:50px"},attrs:{data:t.tableData,border:""}},[s("el-table-column",{attrs:{prop:"name",width:"300",label:"组织名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"desc",width:"300",label:"组织描述"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.handleDel(a.$index,a.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"30px 0 0 0"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showDialog}},[t._v("添加")])],1)],1)]),t._v(" "),s("li",{staticClass:"clearfix"},[s("span",{staticClass:"listLabel fl"},[t._v("检测网段：")]),t._v(" "),s("span",{staticClass:"fl listOption"},t._l(t.primaryInfo.segments,function(a,i){return s("strong",{key:i,staticClass:"netIp"},[t._v("\n                        "+t._s(a)+"\n                    ")])}))])]),t._v(" "),s("div",{staticClass:"submitBox"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submitHandle}},[t._v("确定")]),t._v(" "),s("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("取消")])],1)]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialog,width:"40%"},on:{"update:visible":function(a){t.dialog=a}}},[s("div",[s("div",[s("span",[t._v("组织选择：")]),t._v(" "),s("organizationSelect",{on:{getParentId:t.organizationSelectHandle}})],1),t._v(" "),s("div",{staticClass:"organizationBox"},[s("ul",{staticClass:"organization"},[s("li",[s("span",[t._v("网段信息：")]),t._v(" "),s("span",t._l(t.netWork,function(a,i){return s("strong",{key:i,staticClass:"netIp"},[t._v("\n                                "+t._s(a)+"\n                            ")])}))]),t._v(" "),s("li",[s("span",[t._v("地址信息：")]),t._v(" "),s("span",t._l(t.address,function(a,i){return s("strong",{key:i,staticClass:"netIp"},[t._v("\n                                "+t._s(a)+"\n                            ")])}))])]),t._v(" "),s("div",{staticClass:"action"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmHandle}},[t._v("确定")]),t._v(" "),s("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.cancelHandle}},[t._v("取消")])],1)])])])],1)},staticRenderFns:[]};var n=s("VU/8")(i,e,!1,function(t){s("djo4"),s("Oa18")},"data-v-526a73f8",null);a.default=n.exports}});